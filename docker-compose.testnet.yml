name: pepecoin-mainnet

services:
  core:
    image: pepeenthusiast/pepecoin-core:latest
    restart: unless-stopped
    command:
        -testnet
        -printtoconsole
        -server=1
        -txindex=1
        -rpcallowip=0.0.0.0/0
        -rpcuser=rpc
        -rpcpassword=rpcp
    volumes:
        - core_data:/home/pepecoin/.pepecoin
  electrs:
    image: pepeenthusiast/electrs:latest
    restart: unless-stopped
    ports:
      - 3001:3000
    command: |
      --network testnet
      --jsonrpc-import
      --address-search
      --index-unspendables
      --rest-default-chain-txs-per-page 10
      --daemon-rpc-addr core:33873
      --daemon-dir /.pepecoin
      --cookie rpc:rpcp
      --db-dir /electrs
      --cors '*'
    volumes:
    - core_data:/.pepecoin
    - electrs_data:/electrs
  holders:
    build: 
      context: .
      dockerfile: Dockerfile
    environment:
      - ELECTRS_URL=http://electrs:3000
    ports:
      - "4001:4000"
    volumes:
      - holders_data:/app/data/
    command: npm start

volumes:
  core_data:
  electrs_data:
  holders_data: